.well.booking-listing
  - if current_user.pets.present?
    = link_to 'Make reservation', new_booking_path(homestay_id: provider.id), class: 'btn btn-primary btn-large', 'data-toggle' => 'modal'
    Book accommodation with this listing now!
  - else
    = link_to "Make reservation", new_pet_path(redirect_path: url_for(provider)), class: 'btn btn-primary btn-large disabled'
    You need to
    = link_to 'add a pet', new_pet_path(redirect_path: url_for(provider))
    before you can make a reservation
.enquire-listing
  - if current_user.pets.present?
    = link_to "Enquire now", "#enquire", 'data-toggle' => 'modal'
    Contact the owner of this listing now!
  - else
    = link_to "Enquire now", new_pet_path(redirect_path: url_for(provider)), class: 'disabled'
    You need to
    = link_to 'add a pet', new_pet_path(redirect_path: url_for(provider))
    before you can make an enquiry
.modal.hide.fade#enquire
  .modal-header
    %button.close{type: "button", 'data-dismiss' => "modal"} Ã—
    %h3 Select start date of stay
  = simple_form_for @enquiry do |f|
    .modal-body
      %input{type: 'hidden', value: provider.id, name: 'enquiry[homestay_id]'}
      -#= f.hidden_field :date
      %table.enquire-table
        %tbody
          %tr
            %td
              = f.input :duration_id, label: "Arrange for", collection: ReferenceData::Duration.all, include_blank: false
          %tr
            %td
              - current_date = DateTime.now.strftime("%d/%m/%Y")
              - current_time = Time.now.strftime("%H:%m")
              = render partial: 'shared/datetime_field', object: { name: 'enquiry[check_in_date]', label: 'Check in date',
                                                                   value: current_date, readonly: true }
            %td
              = render partial: 'shared/time_field', object: { name: 'enquiry[check_in_time]', label: 'Check in time',
                                                                   value: current_time, readonly: true }
          %tr
            %td
              = render partial: 'shared/datetime_field', object: { name: 'enquiry[check_out_date]', label: 'Check out date',
                                                                   value: current_date, readonly: true }
            %td
              = render partial: 'shared/time_field', object: { name: 'enquiry[check_out_time]', label: 'Check out time',
                                                                   value: current_time, readonly: true }
          %tr
            %td.message{colspan: 2}
              = f.input :message, placeholder: 'Enter an optional personal message', input_html: {class: 'span7', rows: 4}
    .modal-footer
      %a.btn{href:"#", 'data-dismiss' => "modal"} Cancel
      = f.submit 'Can you look after my pet?', class: 'btn btn-primary'
