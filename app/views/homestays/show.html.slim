.container-fluid.homestay-show
  .row
    #hero.carousel.slide data-ride='carousel' date-interval='10000'
      ol.carousel-indicators
        li.active data-slide-to='0' data-target='#hero'
        li data-slide-to='1' data-target='#hero'
        li data-slide-to='2' data-target='#hero'
      .carousel-inner
        .item.active
          = image_tag 'placeholder.png'
        .item
          = image_tag 'placeholder.png'
        .item
          = image_tag 'placeholder.png'
      a.left.carousel-control data-slide='prev' href='#hero' role='button'
        = image_tag 'homestay/chevron_left.png', class: 'chevron'
      a.right.carousel-control data-slide='next' href='#hero' role='button'
        = image_tag 'homestay/chevron_right.png', class: 'chevron'
      .price-tag
        span.price $#{@homestay.cost_per_night.to_i}
        span.per-night.hidden-xs
          |  /24h

  .row
    .col-sm-8.hs-upper-section
      .row.basic-info
        .col-xs-4.avatar
          - if @homestay.user.profile_photo?
            = cl_image_tag @homestay.user.profile_photo.public_id, width: 95, height: 95, crop: :thumb, gravity: :face, radius: :max, format: :png, class: 'img-responsive pull-right'
          - elsif @homestay.user.uid.present?
            = facebook_profile_image_tag @homestay.user.uid, width: 95, height: 95, crop: :thumb, gravity: :face, radius: :max, format: :png, class: 'img-responsive pull-right'
          - else
            = image_tag 'default_profile_photo.jpg', style: 'width: 95px;', class: 'img-circle', class: 'img-responsive pull-right'
        .col-xs-8.info
          span.title #{@homestay.title}
          span.suburb #{@homestay.location}
          span.ratings
            - if @homestay.average_rating > 0
              - reviews = @homestay.user.received_feedbacks
              = render 'stars', rating: @homestay.average_rating
              span.count
                |  (#{reviews.count})
      span.section-title.details-title Listing Details
      .row.details
        .col-xs-4.entries
          span.pull-right Property type
          br
          span.pull-right Outdoor area size
          br
          span.pull-right Extra services
          br
          span.pull-right After hour supervision
          br
          span.pull-right Emergency transport
        .col-xs-8.info
          span
            i.fa.fa-home
            |  House
          br
          span
            i.fa.fa-tree
            |  Medium
          br
          span
            | Pet grooming and pet walking
          br
          span.after-work
            i.fa.fa-check-circle
          br
          span.emergency
            i.fa.fa-check-circle
      a.btn.btn-primary.inquiry REQUEST A MEETING

    .map-container.col-sm-4
      #map data-lat=@homestay.latitude data-lng=@homestay.longitude

  .row
    .col-sm-8.hs-lower-section
      span.section-title About this listing
      pre.description.readmore #{@homestay.description}
      - if @homestay.average_rating > 0
        .rating
          .count #{pluralize reviews.count, 'Review'}
          .stars
            = render 'stars', rating: @homestay.average_rating
        = render 'review_row', review: reviews.shift ,top: true
        - for review in reviews
          = render 'review_row', review: review, top: false

    .col-sm-4.calendar-container
      = render 'pages/dashboard/calendar', host_id: @homestay.user.id

coffee:
  $map = $('#map')
  map = new GMaps
    div: '#map'
    lat: $map.data('lat')
    lng: $map.data('lng')
    minZoom: 10
    maxZoom: 15
    disableDefaultUI: true
  map.addMarker
    lat: $map.data('lat')
    lng: $map.data('lng')
    icon: 'http://res.cloudinary.com/hxnfgf9c2/image/upload/v1414374978/map_marker.png'

  $('.readmore').readmore
    lessLink: '<a href="#">Collapse</a>'
    maxHeight: 170
  $('.review .readmore').readmore
    lessLink: '<a href="#">Collapse</a>'
    maxHeight: 108
